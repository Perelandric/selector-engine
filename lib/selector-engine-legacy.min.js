/* selector-engine | (c) 2016 Perelandric | MIT License */
;(function(global) {var g=global.Query={},k=/(?:^\s+|\s+$)/g,l={},m={};g.one=function(a,b){1===arguments.length&&(b=a,a=document);var c;a:{c=new n(b);for(var f=a,d=f.getElementsByTagName(c.g),e=0,h=d.length;e<h;e+=1)if((!q||1===d[e].nodeType)&&c.matches(f,d[e])){c=d[e];break a}c=null}return c};g.all=function(a,b){1===arguments.length&&(b=a,a=document);for(var c=new n(b),f=a,d=f.getElementsByTagName(c.g),e=[],h=0,p=d.length;h<p;h+=1)q&&1!==d[h].nodeType||c.matches(f,d[h])&&e.push(d[h]);return e};
g.matches=function(a,b){return(new n(b)).matches(a,a)};var r=Error("Invalid selector"),t=/^-?(?:[_a-zA-Z\u0080-\uFFFF]|\\[^\n]?|--\d?)(?:[-\w\u0080-\uFFFF]|\\[^\n]?)*/,u=new RegExp("^\\s*("+t.source.slice(1)+")\\s*(?:([$^*~|]?=)\\s*(?:((?:'(?:[^'\\n]|\\\\\\n)*')|(?:\"(?:[^\"\\n]|\\\\\\n)*\"))|("+t.source.slice(1)+")))?\\s*([iI]?)\\s*]"),v=/^(?:([-+]?\d+)|([-+]?\d*)?n\s*(?:([-+])\s*(\d+))?|(even)|(odd))\s*\)/i;function w(a,b,c){this.kind=a;this.value=b;this.j=c}w.prototype.name="";
function x(a,b,c,f){a instanceof x?(this.c=a.c,this.a=a.a,this.m=a.m,this.s=a):(this.c=a,this.m=this.a=-1);this.C=!!c;this.B=!!f;this.v=b||"";this.f=!1;this.b=this.next();this.f=!0}var y=[""];
x.prototype.next=function(){if(this.f)return this.f=!1,this.b;if(null===this.b)return this.b;var a,b=this.a+=1;a=this.c.charAt(b);this.m=this.a;if(!a||a===this.v)return this.s&&(this.s.a=this.a,this.s=null),this.b=null;switch(a){case ",":case "*":case ">":case "+":case "~":this.b=a;break;case ":":b=!1;":"===this.c.charAt(this.a+1)&&(this.a+=1,b=!0);a=(t.exec(this.c.slice(this.a+1))||y)[0].toLowerCase();this.a+=a.length;"("===this.c.charAt(this.a+1)?(this.a+=1,this.b=A(this,a)):this.b=new w(12,a,B[a]);
if(!this.b||!this.b.j)switch(a){case "scope":this.b=22;break;case "first-line":case "first-letter":case "before":case "after":this.b=25}if(b&&25!==this.b)throw r;break;case "[":b=u.exec(this.c.slice(this.a+1));if(!b)throw r;this.a+=b[0].length;this.b=new w(b[5]?24:20,b[3]?b[3].slice(1,-1):b[4],b[2]||21);this.b.name=b[1];if(b[5])if(b[2])this.b.value=this.b.value.toLowerCase();else throw r;break;default:if(b=C(this.c,this.a),0<b)this.a+=b-1,this.b=3;else if(b="#"===a?10:"."===a?18:11,11===b&&--this.a,
a=t.exec(this.c.slice(this.a+1)))this.a+=a[0].length,this.b=new w(b,a[0]);else throw r;}return this.b};
function A(a,b){switch(b.toLowerCase()){case "not":if(a.C)throw r;return new w(2,new n(new x(a,")",!0,!0)),19);case "matches":return new w(2,new n(new x(a,")",!1,!0)),23);case "lang":var c=new x(a,")"),f=D(c);if(11!==f.kind||D(c))throw r;f.kind=2;f.j=13;return f;case "nth-child":return E(a,new w(2,0,14));case "nth-last-child":return E(a,new w(2,0,15));case "nth-of-type":return E(a,new w(2,0,16));case "nth-last-of-type":return E(a,new w(2,0,17));default:throw r;}}
function D(a){for(;3===a.next(););return a.b}function E(a,b){var c=0,f=0,d=v.exec(a.c.slice(a.a+1));if(!d)throw r;a.a+=d[0].length;d[1]?f=+d[1]:d[5]?c=2:d[6]?(c=2,f=1):(c=d[2],d=d[3]+d[4],c=c&&"+"!==c&&"-"!==c?+c:"-"===c?-1:1,d&&(f=+d));b.value=[c,f];return b};function n(a){var b=a instanceof x;if(!b&&l.hasOwnProperty(a))return l[a];var c=b?a:new x(a);this.g="";this.u=[];for(var f=!0,d;d=D(c);){var e=","===d;if(f){if(!d||e)throw r;f=!1;c.f=!0}d=new F(c);d.l||(this.g?this.g!==d.tag&&(this.g="*"):this.g=d.tag,this.g||(this.g="*"),this.A="*"===this.g,this.u.push(d))}b||(l[a]=this)}
n.prototype.matches=function(a,b){for(var c=0,f=this.u.length;c<f;c+=1){var d=this.u[c],e=d.h[d.h.length-1].tag;if(e=!this.A||!e||e===G(b))a:{for(var e=a,h=b,p=d.h.length-1,L=0;-1<p;--p){var H=d.h[p],z=!1;if(H instanceof I){switch(L){case 0:z=!0;break;case ">":z=!0;case 6:h=J(h);break;case "+":z=!0;case "~":h=K(h)}if(!h){e=!1;break a}if(!M(e,h,H)){if(z){e=!1;break a}p+=1}}else L=H}e=!0}if(e)return!0}return!1};
function F(a){var b=a.f?a.m:a.a+1,c=a.c.indexOf(a.v||",",b);-1===c&&(c=a.c.length);b=a.c.slice(b,c).replace(k,"");if(m.hasOwnProperty(b))return a.f=!1,a.a=c-1,m[b];var f=!1,d;for(this.h=[];d=a.next();){var e=3===d;e&&(d=D(a));if(!d||","===d){a.f=!0;break}if(this.o)throw r;if(f){if(a.B)throw r;switch(d){case ">":case "+":case "~":this.h.push(d);break;default:if(e)a.f=!0,this.h.push(6);else throw r;}f=!1}else a.f=!0,this.h.push(new I(a,this)),f=!0}if(!f)throw r;this.l&&(this.h=null);c===a.a&&(m[b]=
this)}F.prototype.l=!1;F.prototype.i=!1;F.prototype.o=!1;function I(a,b){this.w=[];var c=D(a);if(!c||","===c)throw r;"*"!==c&&(11===c.kind?this.tag=c.value.toUpperCase():a.f=!0);a:for(;c=a.next();){switch(c){case ",":case 3:case ">":case "+":case "~":a.f=!0;break a}if(b.o)throw r;if(25===c)b.o=!0,b.l=!0;else if(22===c)b.i&&(b.l=!0),this.i=!0;else switch(c.kind){case 12:case 10:case 20:case 24:case 18:case 2:this.w.push(c);break;default:throw r;}}this.i&&(b.i=!0)}I.prototype.tag="";I.prototype.i=!1;var q=0!==document.createElement("div").appendChild(document.createComment("")).parentNode.getElementsByTagName("*").length;
function M(a,b,c){if(c.i&&b!==a||c.tag&&G(b)!==c.tag)return!1;a=0;for(var f=c.w;a<c.length;a++){var d=f[a];switch(d.kind){case 18:if(N(b.className,d.value))continue;return!1;case 10:if(b.id===d.value)continue;return!1;case 12:if(d.j(b))continue;return!1;case 2:switch(d.j){case 19:if(!d.value.matches(b))continue;return!1;case 23:if(d.value.matches(b))continue;return!1;case 14:if(O(b,d,"",!1))continue;return!1;case 15:if(O(b,d,"",!0))continue;return!1;case 16:if(O(b,d,c.tag,!1))continue;return!1;case 17:if(O(b,
d,c.tag,!0))continue;return!1;case 13:for(var e=b;e&&!e.lang;)e=e.parentNode;if(e&&P(e.lang,d.value))continue;return!1}case 20:case 24:e=d.name;e=((b.attributes[e]||"class"!==e?b.attributes[e]:b.attributes.className)||Q).value;if(null==e)return!1;24===d.kind&&(e=e.toLowerCase());switch(d.j){case "=":if(e===d.value)continue;return!1;case "^=":if(0===e.lastIndexOf(d.value,0))continue;return!1;case "$=":if(e.lastIndexOf(d.value)+d.value.length===e.length)continue;return!1;case "|=":if(P(e,d.value))continue;
return!1;case "~=":if(N(e,d.value))continue;return!1;case 21:continue;case "*=":if(-1===e.indexOf(d.value))return!1}}}return!0}function P(a,b){var c=a.charAt(b.length);return(!c||"-"===c)&&0===a.lastIndexOf(b,0)}function N(a,b){for(var c=0;-1!==(c=a.indexOf(b,c));)if(C(a,c+b.length)){if(C(a,c-1))return!0;c+=b.length+1}else c+=b.length+2;return!1}
function O(a,b,c,f){var d=b.value[0];if(!a.parentNode)return!1;b=1-b.value[1];var e;f?(e=a.parentNode,e=e.lastChild&&1!==e.lastChild.nodeType?K(e.lastChild):e.lastChild):(e=a.parentNode,e=e.firstChild&&1!==e.firstChild.nodeType?R(e.firstChild):e.firstChild);for(;e!==a;)c&&G(e)!==c||(b+=1),e=f?K(e):R(e);return 0===b||0===b%d&&0<=b/d}
var S={INPUT:1,TEXTAREA:1,SELECT:1,BUTTON:1,OPTION:1,OPTGROUP:1},T={hidden:1,image:1,button:1,submit:1,reset:1},U=["A","AREA","LINK"],B={root:function(a){return a.ownerDocument.documentElement===a},empty:function(a){return!a.firstChild},optional:function(a){return!B.required(a)},required:function(a){return V(a,"required")&&S[G(a)]&&!T[a.type]},checked:function(a){return a.checked&&("checkbox"===a.type||"radio"===a.type)||a.selected&&"OPTION"===G(a)},indeterminate:function(a){return V(a,"indeterminate")&&
"checkbox"===a.type&&"INPUT"===G(a)},"out-of-range":function(a){return!B["in-range"](a)},"in-range":function(a){return"INPUT"===G(a)&&("number"===a.type||"text"===a.type&&(W(a,"min")||W(a,"max")))&&!0===((+a.min!==+a.min||+a.value>=+a.min)&&(+a.max!==+a.max||+a.value<=+a.max))},"default-option":function(a){return a.defaultChecked||a.defaultSelected?!0:a.form&&1===a.form.nodeType&&g.matches(a,"BUTTON, INPUT[type=submit]")&&g.one(a.form,"BUTTON, INPUT[type=submit]")===a},enabled:function(a){return!B.disabled(a)},
disabled:function(a){return V(a,"disabled")&&S[G(a)]},target:function(a){return a.id&&window.location.hash.slice(1)===a.id},"any-link":function(a){var b;if(b=W(a,"href"))a:{b=0;for(var c=U.length;b<c;b+=1)if(U[b]===G(a)){b=!0;break a}b=!1}return b},hover:function(a){X&&Y();if(a.contains)return a.contains(Z);var b=Z;do if(a===b)return!0;while(b&&(b=J(b)));return!1},focus:function(a){return a===a.ownerDocument.activeElement},"first-child":function(a){return!K(a)},"last-child":function(a){return!R(a)},
"only-child":function(a){return!K(a)&&!R(a)},"first-of-type":function(a){for(var b=G(a);(a=K(a))&&G(a)!==b;);return!a},"last-of-type":function(a){for(var b=G(a);(a=R(a))&&G(a)!==b;);return!a},"only-of-type":function(a){return B["first-of-type"](a)&&B["last-of-type"](a)}},X=!0,Z=null;
function Y(){if(X){X=!1;window.addEventListener?window.addEventListener("mouseover",function(a){Z=a.target},!0):window.attachEvent&&window.attachEvent("onmouseover",function(a){Z=a.srcElement});var a=document.body;if(a){var b=a.nextSibling,c=a.parentNode;c.removeChild(a);c.insertBefore(a,b)}}};function C(a,b){for(var c=0;;){switch(a.charAt(b+c)||""){case " ":case "\t":case "\n":c+=1;continue;case "":return c||-1}return c}}function G(a){return a.nodeName.toUpperCase()}function V(a,b){return a[b]||W(a,b)}function W(a,b){return!(a.attributes[b]||"class"!==b?!a.attributes[b]:!a.attributes.className)}var Q={};function J(a){return(a=a.parentNode)&&1===a.nodeType?a:null}function K(a){for(;(a=a.previousSibling)&&1!==a.nodeType;);return a}
function R(a){for(;(a=a.nextSibling)&&1!==a.nodeType;);return a};})(this);

