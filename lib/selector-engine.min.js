/* selector-engine v0.0.1 | (c) 2016 Perelandric | MIT License */
;(function(global) {var l=global.Query={};l.one=function(a,b){return m(new p(b))};l.all=function(a,b){return q(new p(b))};l.matches=function(a,b){return(new p(b)).matches(a)};var r=(global.HTMLElement||global.Element||{}).prototype;r&&!r.matches&&(r.matches=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||function(a){return l.matches(this,a)});var t=Error("Invalid selector"),v=new u(4),w=new u(4),x=new u(4),y=new u(4),z=new u(4),B=new u(1),C=new u(",",","),aa=new u(3," "),D=/^-?(?:[_a-zA-Z\u0080-\uFFFF]|\\[^\n]?|--\d?)(?:[-\w\u0080-\uFFFF]|\\[^\n]?)*/,ba=new RegExp("^\\s*("+D.source.slice(1)+")\\s*(?:([$^*~|]?=)\\s*(?:((?:'(?:[^'\\n]|\\\\\\n)*')|(?:\"(?:[^\"\\n]|\\\\\\n)*\"))|("+D.source.slice(1)+")))?\\s*]"),ca=/^(?:([-+]?\d+)|([-+]?\d*)?n\s*(?:([-+])\s*(\d+))?|(even)|(odd))\s*\)/i;v.c=6;w.c=5;x.c=7;y.c=8;z.c=9;
function u(a,b){this.kind=a;this.value=b}u.prototype.kind=0;u.prototype.c=0;u.prototype.name="";u.prototype.value="";u.prototype.j=0;u.prototype.l=0;function E(a,b,c){a instanceof E?(this.f=a.f,this.a=a.a,this.m=a.m,this.o=a):(this.f=a,this.m=this.a=-1);this.v=!!c;this.u=b||"";this.g=!1;this.b=this.next();this.g=!0}var da=[""];
E.prototype.next=function(){if(this.g)return this.g=!1,this.b;if(null==this.b)return this.b;var a=this.f.charAt(this.a+=1);this.m=this.a;if(!a||a===this.u)return this.o&&(this.o.a=this.a,this.o=null),this.b=null;switch(a){case " ":case "\t":case "\n":for(;;){switch(this.f.charAt(this.a+=1)){case " ":case "\t":case "\n":continue}--this.a;break}this.b=aa;break;case ",":this.b=C;break;case ">":this.b=w;break;case "+":this.b=x;break;case "~":this.b=y;break;case ":":var a=!1,b;":"===this.f.charAt(this.a+
1)&&(this.a+=1,a=!0);b=(D.exec(this.f.slice(this.a+1))||da).charAt(0).toLowerCase();this.a+=b.length;if(a)switch(b){case "first-line":case "first-letter":case "before":case "after":this.b=new u(12,b);this.b.c=F["no-tok"];break;default:throw t;}else if("("===this.f.charAt(this.a+1))this.a+=1,this.b=ea(this,b);else if(this.b=new u(12,b),this.b.c=F[b],!this.b.c)throw t;break;case "[":a=ba.exec(this.f.slice(this.a+1));if(!a)throw t;this.a+=a[0].length;this.b=new u(20);this.b.name=a[1];a[2]?(this.b.c=
a[2],this.b.value=a[3]?a[3].slice(1,-1):a[4]):this.b.c=21;break;case "*":this.b=B;break;default:if(b="#"===a?10:"."===a?18:11,11===b&&--this.a,a=D.exec(this.f.slice(this.a+1)))this.a+=a[0].length,this.b=new u(b,a[0]);else throw t;}return this.b};
function ea(a,b){var c=new u(2,b.toLowerCase()),e;switch(c.value){case "not":if(a.v)throw t;e=new E(a,")",!0);c.s=[new G(e,!1)];if(2!==c.s[0].i.length||19===c.s[0].i[0].c)throw t;c.c=19;break;case "lang":e=new E(a,")");c=H(e);if(11===c.kind)c.kind=2,c.c=13;else throw t;break;case "nth-child":return c.c=14,I(a,c);case "nth-last-child":return c.c=15,I(a,c);case "nth-of-type":return c.c=16,I(a,c);case "nth-last-of-type":return c.c=17,I(a,c);default:throw t;}if(e.next())throw t;return c}
function H(a){for(var b;(b=a.next())&&3===b.kind;);return b}function I(a,b){b.j=0;b.l=0;var c=ca.exec(a.f.slice(a.a+1));if(!c)throw t;a.a+=c[0].length;if(c[1])b.l=+c[1];else if(c[5])b.j=2;else if(c[6])b.j=2,b.l=1;else{var e=c[2],c=c[3]+c[4];b.j=e&&"+"!==e&&"-"!==e?+e:"-"===e?-1:1;c&&(b.l=+c)}return b};var fa=/(?:^\s+|\s+$)/g,J={},K={};
function p(a){var b=a instanceof E;if(!b&&J.hasOwnProperty(a))return J[a];for(var c={},e=new E(a),d=!0,g=!1,k;k=H(e);){var n=","===k.kind;if(d){if(!k||n)throw t;d=!1;e.g=!0}k=new G(e,!0);g=g||"*"===k.qualifier;c.hasOwnProperty(k.qualifier)||(c[k.qualifier]=[]);c[k.qualifier].push(k)}e=g;this.h=[];for(var f in c)c.hasOwnProperty(f)&&(e?this.h[0]?this.h[0].push.apply(this.h[0],c[f]):this.h[0]=c[f]:this.h.push(c[f]));if(e)for(c=0,f=this.h[0];c<f.length;c+=1)f[c].qualifier="*";b||(J[a]=this)}
p.prototype.matches=function(a){for(var b=0;b<this.h.length;b+=1)if(L(a,this.h[b]))return!0;return!1};function m(a){for(var b=a.h.length,c=null,e=0;e<b;e+=1)M(a,e,function(a){c=c&&0>N(c,a)?c:a;return!0});return c}function q(a){for(var b=[],c=0,e=0,d=0;d<a.h.length;d+=1)M(a,d,function(a){for(var c=0;c<e;c+=1)if(b[c]===a)return;b.push(a)}),b.length!==e&&(c+=1,e=b.length);return c?b.sort(N):b}
function M(a,b,c){a=a.h[b];b=root.getElementsByTagName(O?"*":a[0].qualifier);for(var e=0;e<b.length;e+=1){var d=b[e];if((!ga||1===d.nodeType)&&L(d,a)&&c(d))break}}
function G(a,b){var c=a.g?a.m:a.a+1,e=a.f.indexOf(a.u||",",c);-1===e&&(e=a.f.length);c=a.f.slice(c,e).replace(fa,"");if(K.hasOwnProperty(c))return a.g=!1,a.a=e-1,K[c];var d=!1,g;this.source=a;this.i=[];for(this.qualifier="";g=a.next();){var k=3===g.kind;k&&(g=H(a));if(g&&","!==g.kind)if(d){switch(g){case w:case x:case y:this.i.push(g);break;default:if(k)a.g=!0,this.i.push(v);else throw t;}d=!1}else{a.g=!0;d=b;P.length=0;this.qualifier="";g=H(this.source);if(!g||","===g.kind)throw t;switch(g.kind){case 11:g.value=
g.value.toUpperCase();case 1:this.qualifier=g.value||"*";P.push(g);break;default:this.source.g=!0,this.qualifier="*",d&&P.push(B)}a:for(;g=this.source.next();)switch(g.kind){case ",":case 3:case 4:this.source.g=!0;break a;case 10:case 20:case 18:case 2:case 12:P.push(g);break;default:throw t;}for(d=P.length-1;-1<d;--d)this.i.push(P[d]);P.length=0;d=!0}else{a.g=!0;break}}if(!1===d)throw t;this.i.push(z);this.source=null;e===a.a&&(K[c]=this)}var P=[];
function Q(a,b){if(a===b||a.firstChild&&Q(a.firstChild,b))return!0;for(;a=a.nextSibling;)if(1===a.nodeType&&Q(a,b))return!0;return!1}function N(a,b){return a===b?0:a.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.contains(b)?-1:b.contains(a)?1:Q(a.nextSibling,b)?-1:1};var R=document.createElement("div");R.innerHTML="1<div123></div123>";var O="/"===R.getElementsByTagName("*")[0].nodeName.charAt(0);R.innerHTML="";var ga=0!==R.appendChild(document.createComment("")).parentNode.getElementsByTagName("*").length,ha=/^\s\s?$|^$/,R=null;
function L(a,b){var c=0;a:for(;c<b.length;c+=1){for(var e=b[c],d=a,g=!1,k=-1,n=e.i.length-1;-1<n;--n){var f=e.i[n];if(4===f.kind){g=!1;switch(f.c){case 9:g=!0;break;case 5:g=!0;case 6:d=d.parentNode;break;case 7:g=!0;case 8:for(;(d=d.previousSibling)&&1!==d.nodeType;);}if(!d||1!==d.nodeType)return!1;k=n+1}else{var h,A="";switch(f.kind){case 1:continue;case 11:h=d.nodeName.toUpperCase();A=f.value;O&&"/"===h.charAt(0)&&(h=h.slice(1));if(h===A)continue;break;case 18:if(S(d.className,f.value))continue;
break;case 10:if(d.id===f.value)continue;break;case 12:if(f.c(d))continue;break;case 2:switch(f.c){case 19:if(!L(d,f.s))continue;break;case 14:if(T(d,f,"",!1))continue;break;case 15:if(T(d,f,"",!0))continue;break;case 16:if(T(d,f,A,!1))continue;break;case 17:if(T(d,f,A,!0))continue;break;case 13:for(h=d;h&&!h.lang;)h=h.parentNode;if(h&&U(h.lang,f.value))continue}break;case 20:h=d.getAttribute(f.name);if(null==h)return!1;switch(f.c){case "=":if(h===f.value)continue;break;case "^=":if(0===h.lastIndexOf(f.value,
0))continue;break;case "$=":if(h.lastIndexOf(f.value)+f.value.length===h.length)continue;break;case "|=":if(U(h,f.value))continue;break;case "~=":if(S(h,f.value))continue;break;case 21:continue;case "*=":if(-1!==h.indexOf(f.value))continue}}if(g)continue a;n=k}}return!0}return!1}function U(a,b){var c=a.charAt(b.length);return(!c||"-"===c)&&0===a.lastIndexOf(b,0)}function S(a,b){for(var c=-1;-1!==(c=a.indexOf(b,c+1));)if(ha.test(a.charAt(c-1)+a.charAt(c+b.length)))return!0;return!1}
function T(a,b,c,e){var d=b.j;b=b.l;var g=0>=d?b:Infinity;if(!a.parentNode||0>=d&&0>=b)return!1;var k=1,n=e?a.parentNode.lastChild:a.parentNode.firstChild;if(!n)return!1;for(c=c.toUpperCase();n!==a&&k<=g;)1!==n.nodeType||c&&n.nodeName.toUpperCase()!==c||(k+=1),n=e?n.previousSibling:n.nextSibling;return k%d!==b?!1:0<=d&&k>=b}var V={INPUT:1,TEXTAREA:1,SELECT:1,BUTTON:1,OPTION:1,OPTGROUP:1},W={hidden:1,image:1,button:1,submit:1,reset:1};
function X(a){return"INPUT"===a.nodeName.toUpperCase()&&("number"===a.type||"text"===a.type&&("min"in a||"max"in a))}
var F={root:function(a){return a.ownerDocument.documentElement===a},empty:function(a){return!a.firstChild},optional:function(a){return V[a.nodeName.toUpperCase()]&&!W[a.type]&&!F.required(a)},required:function(a){return V[a.nodeName.toUpperCase()]&&!W[a.type]&&("string"===typeof a.required||"boolean"===typeof a.required&&a.required)},checked:function(a){return a.checked&&("checkbox"===a.type||"radio"===a.type)||a.selected&&"OPTION"===a.nodeName},indeterminate:function(a){return!!a.indeterminate&&
"checkbox"===a.type&&"INPUT"===a.nodeName.toUpperCase()},"out-of-range":function(a){return X(a)&&!1===((+a.min!==+a.min||+a.value>=+a.min)&&(+a.max!==+a.max||+a.value<=+a.max))},"in-range":function(a){return X(a)&&!0===((+a.min!==+a.min||+a.value>=+a.min)&&(+a.max!==+a.max||+a.value<=+a.max))},"default-option":function(a){return a.defaultChecked||a.defaultSelected?!0:a.form&&1===a.form.nodeType&&l.matches(a,"BUTTON, INPUT[type=submit]")&&l.one(a.form,"BUTTON, INPUT[type=submit]")===a},enabled:function(a){return!a.disabled&&
V[a.nodeName.toUpperCase()]},disabled:function(a){return a.disabled&&V[a.nodeName.toUpperCase()]},target:function(a){return a.id&&window.location.hash.slice(1)===a.id},hover:function(a){Y&&ia();if(a.contains)return a.contains(Z);var b=Z;do if(a===b)return!0;while(b&&(b=b.parentNode));return!1},focus:function(a){return a===a.ownerDocument.activeElement},"first-child":function(a){for(;(a=a.previousSibling)&&1!==a.nodeType;);return!a},"last-child":function(a){for(;(a=a.nextSibling)&&1!==a.nodeType;);
return!a},"only-child":function(a){return F["first-child"](a)&&F["last-child"](a)},"first-of-type":function(a){for(var b=a.nodeName.toUpperCase();(a=a.previousSibling)&&(1!==a.nodeType||a.nodeName.toUpperCase()!==b););return!a},"last-of-type":function(a){for(var b=a.nodeName.toUpperCase();(a=a.nextSibling)&&(1!==a.nodeType||a.nodeName.toUpperCase()!==b););return!a},"only-of-type":function(a){return F["first-of-type"](a)&&F["last-of-type"](a)},"no-tok":function(){return!1}},Y=!0,Z=null;
function ia(){if(Y){Y=!1;window.addEventListener?window.addEventListener("mouseover",function(a){Z=a.target},!0):window.attachEvent&&window.attachEvent("onmouseover",function(a){Z=a.srcElement});var a=document.body;if(a){var b=a.nextSibling,c=a.parentNode;c.removeChild(a);c.insertBefore(a,b)}}};})(this);

